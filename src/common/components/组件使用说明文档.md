# 易起问相关组件使用说明
=========
## 版本变更纪录
| 版本 | 修订人 | 修改时间 | 修改详情 |
|:-------------:|:-------------:|:-------------:|:-------------:|
| 1.0 | 马彪 | 2017-09-28 | 创建组件基础文档 |
---
---
## 目录
<a href='#f1'>1、图片上传组件</a>
--- 

## <p name='f1'>1、uploadPhoto （图片上传组件）</p>
**功能：** 
> 实现图片上传功能，一次只能上传一张图片

**父组件引用方法及参数说明**
> layer,showLoading,hideLoading 为提示框的属性
> isRepeatUpload: false -> 不需要重发，true -> 需要重发，父组件监听到上传失败后重新，
重新设置这个值为true即可
> 其余参数看下面
```
<template>
    <!-- 父组件上传按钮 -->
    <div @click="clicked">上传图片</div>
    <!-- 上传图片组件 -->
    <UploadPhoto ref="uploadPhoto"
                 @layer="layer"
                 @showLoading="showLoading"
                 @hideLoading="hideLoading"
                 @getImgData="getImgDataUrl"
                 @progress="uploadProgress"
                 @uploadResData="uploadResData"
                 :isRepeatUpload="false"
    ></UploadPhoto>
</template>
<script>
    // 父组件中上传图片元素调起上传图片选择组件
    clicked(){
        this.$refs['uploadPhoto'].$el.click();
    },
    // 父组件监听子组件上传图片返回的base64的数据，用于本地显示图片
    getImgDataUrl(value){
        // value -> 图片base64的数据
        console.log(value);
    },
    uploadProgress(value){
        // value -> 图片上传的进度百分比，会实时更新，用于进度条显示
        console.log(value)
    },
    uploadResData(value){
        // value -> 图片上传到服务器的反回的数据，处理返回的数据内容
        /* 1、上传成功 
            value = {
                   type:"success"  
                   image_id :"324"
                   image_url:"http://stest.ggwan.com/image/yqw/0fcdaa322b4693-252x300.jpg"
                   res_id:"85eb20fcdaa322b4693facc55f36377c"
                   thumb_url:"http://stest.ggwan.com/image/yqw/0fcdaa322b4693-126x150_thumb.jpg"
            }
            2、上传失败
            value = { type:"fail"}
        */
        console.log(value)
    }

</script>
```
**其余问题待升级**

